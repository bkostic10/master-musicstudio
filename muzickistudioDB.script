CREATE SCHEMA PUBLIC AUTHORIZATION DBA
CREATE MEMORY TABLE KORISNIK(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,IME VARCHAR(255) NOT NULL,KORIME VARCHAR(255) NOT NULL,LICNIBROJ VARCHAR(255) NOT NULL,LOZINKA VARCHAR(255) NOT NULL,LOZINKA2 VARCHAR(255),PREZIME VARCHAR(255) NOT NULL,PRIVILEGIJA INTEGER NOT NULL,CONSTRAINT SYS_CT_81 UNIQUE(KORIME))
CREATE MEMORY TABLE KORISNIK_TERMIN(KORISNIK_ID BIGINT NOT NULL,TERMINI_DATUM VARCHAR(255) NOT NULL,TERMINI_SATNICA INTEGER NOT NULL,TERMINI_SOBA_ID BIGINT NOT NULL,TERMINI_INDEX INTEGER NOT NULL,PRIMARY KEY(KORISNIK_ID,TERMINI_INDEX),CONSTRAINT SYS_CT_85 UNIQUE(TERMINI_DATUM,TERMINI_SATNICA,TERMINI_SOBA_ID),CONSTRAINT FK_KORISNIK_TERMINI_KORISNIK FOREIGN KEY(KORISNIK_ID) REFERENCES KORISNIK(ID))
CREATE MEMORY TABLE SOBA(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,NAZIV VARCHAR(50) NOT NULL,OPIS VARCHAR(255) NOT NULL,TIP INTEGER NOT NULL,STUDIO BIGINT,SOBE_INDEX INTEGER)
CREATE MEMORY TABLE SOBA_TERMIN(SOBA_ID BIGINT NOT NULL,TERMINI_DATUM VARCHAR(255) NOT NULL,TERMINI_SATNICA INTEGER NOT NULL,TERMINI_SOBA_ID BIGINT NOT NULL,TERMINI_INDEX INTEGER NOT NULL,PRIMARY KEY(SOBA_ID,TERMINI_INDEX),CONSTRAINT SYS_CT_91 UNIQUE(TERMINI_DATUM,TERMINI_SATNICA,TERMINI_SOBA_ID),CONSTRAINT FK_SOBA_TERMINI_SOBA FOREIGN KEY(SOBA_ID) REFERENCES SOBA(ID))
CREATE MEMORY TABLE STUDIO(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,NAZIV VARCHAR(255) NOT NULL,ULICA VARCHAR(255) NOT NULL)
CREATE MEMORY TABLE TERMIN(DATUM VARCHAR(255) NOT NULL,SATNICA INTEGER NOT NULL,IZDAT BOOLEAN NOT NULL,SOBA_ID BIGINT NOT NULL,ID_ID BIGINT,KORISNIK_ID BIGINT NOT NULL,PRIMARY KEY(DATUM,SATNICA,SOBA_ID),CONSTRAINT FK9349DA91150E1008 FOREIGN KEY(SOBA_ID) REFERENCES SOBA(ID) ON DELETE CASCADE,CONSTRAINT FK9349DA91A409C3E8 FOREIGN KEY(KORISNIK_ID) REFERENCES KORISNIK(ID) ON DELETE CASCADE)
CREATE MEMORY TABLE TERMINSEQID(ID BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY)
ALTER TABLE KORISNIK_TERMIN ADD CONSTRAINT FK_KORISNIK_TERMINI_TERMINI FOREIGN KEY(TERMINI_DATUM,TERMINI_SATNICA,TERMINI_SOBA_ID) REFERENCES TERMIN(DATUM,SATNICA,SOBA_ID)
ALTER TABLE SOBA ADD CONSTRAINT FK_STUDIO_STUDIO FOREIGN KEY(STUDIO) REFERENCES STUDIO(ID)
ALTER TABLE SOBA_TERMIN ADD CONSTRAINT FK_SOBA_TERMINI_TERMINI FOREIGN KEY(TERMINI_DATUM,TERMINI_SATNICA,TERMINI_SOBA_ID) REFERENCES TERMIN(DATUM,SATNICA,SOBA_ID)
ALTER TABLE TERMIN ADD CONSTRAINT FK9349DA9138358205 FOREIGN KEY(ID_ID) REFERENCES TERMINSEQID(ID)
ALTER TABLE KORISNIK ALTER COLUMN ID RESTART WITH 5
ALTER TABLE SOBA ALTER COLUMN ID RESTART WITH 3
ALTER TABLE STUDIO ALTER COLUMN ID RESTART WITH 2
ALTER TABLE TERMINSEQID ALTER COLUMN ID RESTART WITH 12
CREATE USER SA PASSWORD ""
GRANT DBA TO SA
SET WRITE_DELAY 10
SET SCHEMA PUBLIC
INSERT INTO KORISNIK VALUES(1,'Admin','admin','098890098980','21232f297a57a5a743894a0e4a801fc3','admin','Adminovic',1)
INSERT INTO KORISNIK VALUES(2,'Bane','bkostic10','779797979797','1872470018716b8f94d754cc7a39d32d','bkostic10','Kostic',2)
INSERT INTO KORISNIK VALUES(3,'Pera','bkostic11','800809809809','05c1979bdccf5ba8a865961e50332320','bkostic11','Pampur',2)
INSERT INTO KORISNIK VALUES(4,'Mika','mika11','9840923840923','64e40914ab07dc0e449e57eafcdb6dd7','64e40914ab07dc0e449e57eafcdb6dd7','Mikovic',2)
INSERT INTO SOBA VALUES(1,'Soba 1','Soba ima: \u000d\u000aGuitarsko pojacalo: \u000d\u000aBass pojacalo: \u000d\u000aMikseta: \u000d\u000aPojacalo za glas: \u000d\u000aBubnjevi: ',1,1,0)
INSERT INTO SOBA VALUES(2,'Soba 2','Soba ima: \u000d\u000aGuitarsko pojacalo: \u000d\u000aBass pojacalo: \u000d\u000aMikseta: \u000d\u000aPojacalo za glas: \u000d\u000aBubnjevi: ',0,1,1)
INSERT INTO STUDIO VALUES(1,'Studio 1','AA 1')
INSERT INTO TERMIN VALUES('10.10.2010',0,TRUE,1,2,2)
INSERT INTO TERMIN VALUES('10.10.2010',1,TRUE,1,6,2)
INSERT INTO TERMIN VALUES('10.10.2010',2,TRUE,1,4,2)
INSERT INTO TERMIN VALUES('10.10.2010',3,TRUE,1,5,2)
INSERT INTO TERMIN VALUES('10.10.2010',4,TRUE,1,7,3)
INSERT INTO TERMIN VALUES('13.10.2011',3,FALSE,1,10,2)
INSERT INTO TERMIN VALUES('13.10.2011',3,FALSE,2,11,3)
INSERT INTO TERMIN VALUES('16.10.2011',6,FALSE,1,9,2)
INSERT INTO TERMINSEQID VALUES(2)
INSERT INTO TERMINSEQID VALUES(4)
INSERT INTO TERMINSEQID VALUES(5)
INSERT INTO TERMINSEQID VALUES(6)
INSERT INTO TERMINSEQID VALUES(7)
INSERT INTO TERMINSEQID VALUES(9)
INSERT INTO TERMINSEQID VALUES(10)
INSERT INTO TERMINSEQID VALUES(11)
